<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Supabase Backend Documentation - Universal POS</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f5f5;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }

        header {
            background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
            color: white;
            padding: 60px 40px;
            text-align: center;
        }

        header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .meta {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 20px;
            font-size: 0.9rem;
        }

        .meta span {
            background: rgba(255,255,255,0.2);
            padding: 5px 15px;
            border-radius: 20px;
        }

        nav {
            background: #2d3748;
            padding: 20px 40px;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        nav ul {
            list-style: none;
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }

        nav a {
            color: white;
            text-decoration: none;
            font-size: 0.9rem;
            transition: color 0.3s;
        }

        nav a:hover {
            color: #f97316;
        }

        .content {
            padding: 40px;
        }

        section {
            margin-bottom: 60px;
        }

        h2 {
            color: #f97316;
            font-size: 2rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #f97316;
        }

        h3 {
            color: #2d3748;
            font-size: 1.5rem;
            margin: 30px 0 15px 0;
        }

        h4 {
            color: #4a5568;
            font-size: 1.2rem;
            margin: 20px 0 10px 0;
        }

        p {
            margin-bottom: 15px;
            color: #4a5568;
        }

        ul, ol {
            margin: 15px 0 15px 30px;
        }

        li {
            margin-bottom: 8px;
            color: #4a5568;
        }

        pre {
            background: #2d3748;
            color: #a0aec0;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        code {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
        }

        .code-header {
            background: #1a202c;
            color: #cbd5e0;
            padding: 10px 20px;
            border-radius: 8px 8px 0 0;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .code-header + pre {
            border-radius: 0 0 8px 8px;
            margin-top: 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        table th {
            background: #f97316;
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: 600;
        }

        table td {
            padding: 12px;
            border-bottom: 1px solid #e2e8f0;
        }

        table tr:hover {
            background: #f7fafc;
        }

        .info-box {
            background: #e6f7ff;
            border-left: 4px solid #1890ff;
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 4px;
        }

        .warning-box {
            background: #fff7e6;
            border-left: 4px solid #fa8c16;
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 4px;
        }

        .success-box {
            background: #f6ffed;
            border-left: 4px solid #52c41a;
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 4px;
        }

        .checklist {
            list-style: none;
            margin-left: 0;
        }

        .checklist li {
            padding-left: 30px;
            position: relative;
        }

        .checklist li:before {
            content: 'â–¡';
            position: absolute;
            left: 0;
            font-size: 1.2rem;
            color: #f97316;
        }

        .print-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: #f97316;
            color: white;
            padding: 15px 30px;
            border-radius: 50px;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(249, 115, 22, 0.4);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .print-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(249, 115, 22, 0.5);
        }

        @media print {
            .print-btn, nav {
                display: none;
            }
            
            body {
                background: white;
            }
            
            .container {
                box-shadow: none;
            }
            
            section {
                page-break-inside: avoid;
            }
            
            pre {
                page-break-inside: avoid;
            }
        }

        @media (max-width: 768px) {
            .content {
                padding: 20px;
            }
            
            header {
                padding: 30px 20px;
            }
            
            header h1 {
                font-size: 1.8rem;
            }
            
            nav {
                padding: 15px 20px;
            }
            
            nav ul {
                flex-direction: column;
                gap: 10px;
            }
            
            .print-btn {
                bottom: 15px;
                right: 15px;
                padding: 12px 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Supabase Backend Documentation</h1>
            <p>Universal POS System - Complete Implementation Guide</p>
            <div class="meta">
                <span>Version 1.0</span>
                <span>January 2025</span>
                <span>Production Ready</span>
            </div>
        </header>

        <nav>
            <ul>
                <li><a href="#overview">Overview</a></li>
                <li><a href="#authentication">Authentication</a></li>
                <li><a href="#database">Database Schema</a></li>
                <li><a href="#rls">Row Level Security</a></li>
                <li><a href="#api">API Layer</a></li>
                <li><a href="#migration">Migration Guide</a></li>
                <li><a href="#examples">Code Examples</a></li>
                <li><a href="#deployment">Deployment</a></li>
            </ul>
        </nav>

        <div class="content">
            <section id="overview">
                <h2>Overview</h2>
                
                <h3>Technology Stack</h3>
                <table>
                    <tr>
                        <th>Component</th>
                        <th>Current (Firebase)</th>
                        <th>New (Supabase)</th>
                    </tr>
                    <tr>
                        <td>Database</td>
                        <td>Firestore (NoSQL)</td>
                        <td>PostgreSQL</td>
                    </tr>
                    <tr>
                        <td>Authentication</td>
                        <td>Firebase Auth</td>
                        <td>Supabase Auth</td>
                    </tr>
                    <tr>
                        <td>Storage</td>
                        <td>Firebase Storage</td>
                        <td>Supabase Storage</td>
                    </tr>
                    <tr>
                        <td>Real-time</td>
                        <td>Firestore Snapshots</td>
                        <td>Supabase Realtime</td>
                    </tr>
                </table>

                <h3>Key Requirements</h3>
                <div class="info-box">
                    <p><strong>Mandatory Fields for All Users:</strong></p>
                    <ul>
                        <li><strong>Email Address:</strong> Required for login and communication</li>
                        <li><strong>Phone Number:</strong> Required for login and verification (E.164 format)</li>
                    </ul>
                </div>

                <h3>Authentication Methods Supported</h3>
                <ol>
                    <li><strong>Email + Password:</strong> Traditional login with email and password</li>
                    <li><strong>Phone + OTP:</strong> SMS-based one-time password login</li>
                    <li><strong>Google OAuth:</strong> Sign in with Google account</li>
                </ol>

                <h3>User Roles</h3>
                <table>
                    <tr>
                        <th>Role</th>
                        <th>Access Level</th>
                        <th>Use Case</th>
                    </tr>
                    <tr>
                        <td><strong>Owner</strong></td>
                        <td>Full access to everything</td>
                        <td>Business owner managing entire store</td>
                    </tr>
                    <tr>
                        <td><strong>Manager</strong></td>
                        <td>Limited admin (can't delete)</td>
                        <td>Store manager handling operations</td>
                    </tr>
                    <tr>
                        <td><strong>Cashier</strong></td>
                        <td>Billing only (today's data)</td>
                        <td>Counter staff creating invoices</td>
                    </tr>
                </table>
            </section>

            <section id="authentication">
                <h2>Authentication System</h2>

                <h3>1. User Profile Structure</h3>
                <div class="code-header">TypeScript Interface</div>
                <pre><code>interface UserProfile {
  id: string;              // UUID from Supabase auth.users
  email: string;           // MANDATORY - for login
  phone: string;           // MANDATORY - for verification
  name: string;            // Full name
  photo_url?: string;      // Profile picture URL
  created_at: Date;
  last_login_at: Date;
}</code></pre>

                <h3>2. Signup Flow</h3>
                <p><strong>Step-by-step process:</strong></p>
                <ol>
                    <li>User enters: Name, Phone, Email, Password</li>
                    <li>Backend creates auth user in Supabase</li>
                    <li>Database trigger auto-creates profile record</li>
                    <li>System sends email verification</li>
                    <li>System sends phone OTP for verification</li>
                </ol>

                <div class="code-header">src/api/auth.ts - Signup Function</div>
                <pre><code>async function signUpWithEmail(
  email: string,
  password: string,
  name: string,
  phone: string
) {
  const { data, error } = await supabase.auth.signUp({
    email,
    password,
    options: {
      data: { name, phone }
    }
  });
  
  if (error) throw error;
  return data;
}</code></pre>

                <h3>3. Login Methods</h3>

                <h4>Option A: Email + Password</h4>
                <div class="code-header">Email Login</div>
                <pre><code>async function loginWithEmail(email: string, password: string) {
  const { data, error } = await supabase.auth.signInWithPassword({
    email,
    password
  });
  
  if (error) throw error;
  return data.user;
}</code></pre>

                <h4>Option B: Phone + OTP</h4>
                <div class="code-header">Phone OTP Login (2 Steps)</div>
                <pre><code>// Step 1: Request OTP
async function requestPhoneOTP(phone: string) {
  const { data, error } = await supabase.auth.signInWithOtp({ phone });
  if (error) throw error;
  return data;
}

// Step 2: Verify OTP
async function verifyPhoneOTP(phone: string, otp: string) {
  const { data, error } = await supabase.auth.verifyOtp({
    phone,
    token: otp,
    type: 'sms'
  });
  
  if (error) throw error;
  return data.user;
}</code></pre>

                <h4>Option C: Google OAuth</h4>
                <div class="code-header">Google Login</div>
                <pre><code>async function loginWithGoogle() {
  const { data, error } = await supabase.auth.signInWithOAuth({
    provider: 'google',
    options: {
      redirectTo: `${window.location.origin}/auth/callback`
    }
  });
  
  if (error) throw error;
  
  // After OAuth, check if phone exists
  // If not, prompt user to add phone number
}</code></pre>

                <div class="warning-box">
                    <strong>Important:</strong> After Google OAuth, always check if the user has added their phone number. If not, show a UI to collect it before proceeding.
                </div>
            </section>

            <section id="database">
                <h2>Database Schema</h2>

                <h3>Schema Overview</h3>
                <p>The database consists of 8 main tables with proper relationships and constraints:</p>

                <table>
                    <tr>
                        <th>Table</th>
                        <th>Purpose</th>
                        <th>Key Columns</th>
                    </tr>
                    <tr>
                        <td>profiles</td>
                        <td>User profiles</td>
                        <td>id, email, phone, name</td>
                    </tr>
                    <tr>
                        <td>stores</td>
                        <td>Store information</td>
                        <td>id, owner_id, name, type</td>
                    </tr>
                    <tr>
                        <td>store_members</td>
                        <td>Team & roles</td>
                        <td>store_id, user_id, role</td>
                    </tr>
                    <tr>
                        <td>items</td>
                        <td>Product catalog</td>
                        <td>store_id, name, price, stock</td>
                    </tr>
                    <tr>
                        <td>customers</td>
                        <td>Customer CRM</td>
                        <td>store_id, name, phone, email</td>
                    </tr>
                    <tr>
                        <td>invoices</td>
                        <td>Sales invoices</td>
                        <td>store_id, invoice_number, total</td>
                    </tr>
                    <tr>
                        <td>invoice_items</td>
                        <td>Invoice line items</td>
                        <td>invoice_id, item_id, quantity</td>
                    </tr>
                    <tr>
                        <td>stock_movements</td>
                        <td>Inventory tracking</td>
                        <td>item_id, quantity_change, reason</td>
                    </tr>
                </table>

                <h3>Complete SQL Schema</h3>
                <div class="info-box">
                    <strong>Note:</strong> The complete SQL schema is available in the markdown version of this document. It includes:
                    <ul>
                        <li>All table definitions with constraints</li>
                        <li>Indexes for performance optimization</li>
                        <li>Triggers for automation</li>
                        <li>Database functions</li>
                    </ul>
                </div>

                <h3>Key Features</h3>
                <ul>
                    <li><strong>Auto-Profile Creation:</strong> Database trigger creates profile when user signs up</li>
                    <li><strong>Invoice Numbering:</strong> Function generates sequential invoice numbers per store</li>
                    <li><strong>Stock Management:</strong> Triggers auto-update stock on invoice creation</li>
                    <li><strong>Customer Stats:</strong> Triggers auto-update customer total orders and spent</li>
                </ul>
            </section>

            <section id="rls">
                <h2>Row Level Security (RLS)</h2>

                <h3>What is RLS?</h3>
                <p>Row Level Security ensures that users can only access data they're authorized to see. It's enforced at the database level, making it impossible to bypass even with direct API access.</p>

                <h3>RLS Policy Summary</h3>
                <table>
                    <tr>
                        <th>Table</th>
                        <th>Owner</th>
                        <th>Manager</th>
                        <th>Cashier</th>
                    </tr>
                    <tr>
                        <td>Items</td>
                        <td>Full access</td>
                        <td>View, Add, Edit</td>
                        <td>View only</td>
                    </tr>
                    <tr>
                        <td>Invoices</td>
                        <td>All invoices</td>
                        <td>All invoices</td>
                        <td>Today only</td>
                    </tr>
                    <tr>
                        <td>Customers</td>
                        <td>Full access</td>
                        <td>View, Add, Edit</td>
                        <td>Add only</td>
                    </tr>
                    <tr>
                        <td>Reports</td>
                        <td>All time</td>
                        <td>All time</td>
                        <td>Today only</td>
                    </tr>
                    <tr>
                        <td>Settings</td>
                        <td>Full access</td>
                        <td>No access</td>
                        <td>No access</td>
                    </tr>
                </table>

                <h3>Example RLS Policy</h3>
                <div class="code-header">Items Table - Cashier View Policy</div>
                <pre><code>CREATE POLICY "Cashiers can view items"
ON items FOR SELECT
USING (
  store_id IN (
    SELECT store_id FROM store_members
    WHERE user_id = auth.uid() AND is_active = true
  )
);</code></pre>

                <div class="success-box">
                    <strong>Security Benefit:</strong> Even if a cashier tries to directly query another store's data, the database will prevent it. No data leakage possible.
                </div>
            </section>

            <section id="api">
                <h2>API Layer</h2>

                <h3>Supabase Client Setup</h3>
                <div class="code-header">src/lib/supabaseClient.ts</div>
                <pre><code>import { createClient } from '@supabase/supabase-js';

const supabaseUrl = import.meta.env.VITE_SUPABASE_URL;
const supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY;

export const supabase = createClient(supabaseUrl, supabaseAnonKey, {
  auth: {
    persistSession: true,
    autoRefreshToken: true
  }
});</code></pre>

                <h3>API Organization</h3>
                <p>Organize API functions by domain:</p>
                <ul>
                    <li><code>src/api/auth.ts</code> - Authentication functions</li>
                    <li><code>src/api/stores.ts</code> - Store management</li>
                    <li><code>src/api/items.ts</code> - Item catalog</li>
                    <li><code>src/api/invoices.ts</code> - Invoice operations</li>
                    <li><code>src/api/customers.ts</code> - Customer management</li>
                </ul>

                <h3>Example: Create Invoice</h3>
                <div class="code-header">src/api/invoices.ts</div>
                <pre><code>async function createInvoice(storeId: string, invoiceData: InvoiceData) {
  // Get current user
  const user = await supabase.auth.getUser();
  
  // Generate invoice number
  const { data: invNum } = await supabase
    .rpc('generate_invoice_number', { store_uuid: storeId });
  
  // Create invoice
  const { data: invoice, error } = await supabase
    .from('invoices')
    .insert({
      store_id: storeId,
      invoice_number: invNum,
      ...invoiceData,
      created_by: user.data.user.id
    })
    .select()
    .single();
  
  if (error) throw error;
  
  // Create invoice items
  await supabase.from('invoice_items').insert(
    invoiceData.items.map(item => ({
      invoice_id: invoice.id,
      item_id: item.id,
      quantity: item.quantity,
      price: item.price
    }))
  );
  
  return invoice;
}</code></pre>
            </section>

            <section id="migration">
                <h2>Migration Guide</h2>

                <h3>Step 1: Supabase Project Setup</h3>
                <ol>
                    <li>Go to <a href="https://supabase.com" target="_blank">supabase.com</a></li>
                    <li>Create new project: "universal-pos"</li>
                    <li>Set strong database password</li>
                    <li>Select region closest to your users</li>
                    <li>Copy Project URL and API Key</li>
                </ol>

                <h3>Step 2: Enable Authentication Providers</h3>
                <div class="warning-box">
                    <p><strong>Phone Authentication:</strong></p>
                    <ul>
                        <li>Go to Authentication â†’ Providers</li>
                        <li>Enable Phone provider</li>
                        <li>Configure Twilio credentials</li>
                        <li>Test with your phone number</li>
                    </ul>
                </div>

                <div class="info-box">
                    <p><strong>Google OAuth:</strong></p>
                    <ul>
                        <li>Go to Authentication â†’ Providers</li>
                        <li>Enable Google provider</li>
                        <li>Add Client ID and Secret from Google Cloud Console</li>
                        <li>Add authorized redirect URI</li>
                    </ul>
                </div>

                <h3>Step 3: Run Database Schema</h3>
                <ol>
                    <li>Open Supabase SQL Editor</li>
                    <li>Copy complete schema from markdown document</li>
                    <li>Execute SQL script</li>
                    <li>Verify all tables created</li>
                    <li>Check triggers and functions</li>
                </ol>

                <h3>Step 4: Update Environment Variables</h3>
                <div class="code-header">.env</div>
                <pre><code># Remove Firebase variables
# VITE_FIREBASE_API_KEY=...
# VITE_FIREBASE_AUTH_DOMAIN=...

# Add Supabase variables
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=your-anon-key-here</code></pre>

                <h3>Step 5: Code Migration</h3>
                <ol>
                    <li>Install Supabase client: <code>npm install @supabase/supabase-js</code></li>
                    <li>Create <code>src/lib/supabaseClient.ts</code></li>
                    <li>Update <code>AuthContext.tsx</code> with Supabase auth</li>
                    <li>Replace Firestore calls with Supabase queries</li>
                    <li>Test authentication flows</li>
                </ol>

                <h3>Step 6: Data Migration</h3>
                <div class="warning-box">
                    <strong>Important:</strong> Back up all Firebase data before migration. Test migration script on staging environment first.
                </div>

                <p>Migration script outline:</p>
                <ol>
                    <li>Export users from Firebase</li>
                    <li>Create auth users in Supabase</li>
                    <li>Profiles auto-created via trigger</li>
                    <li>Migrate stores data</li>
                    <li>Migrate items catalog</li>
                    <li>Migrate historical invoices</li>
                    <li>Verify data integrity</li>
                </ol>
            </section>

            <section id="examples">
                <h2>Code Examples</h2>

                <h3>Complete AuthContext with Supabase</h3>
                <p>The complete implementation includes:</p>
                <ul>
                    <li>Email/password authentication</li>
                    <li>Phone OTP authentication</li>
                    <li>Google OAuth</li>
                    <li>Session management</li>
                    <li>Profile loading</li>
                    <li>Store context</li>
                </ul>

                <div class="info-box">
                    <strong>Full Code:</strong> Complete AuthContext implementation is available in the markdown version of this document.
                </div>

                <h3>Key Features</h3>
                <ul>
                    <li><strong>Auto Profile Loading:</strong> Fetches user profile and stores on login</li>
                    <li><strong>Phone Collection:</strong> Prompts for phone if missing after OAuth</li>
                    <li><strong>Error Handling:</strong> User-friendly error messages</li>
                    <li><strong>State Management:</strong> Clean reducer pattern</li>
                </ul>
            </section>

            <section id="deployment">
                <h2>Deployment Checklist</h2>

                <h3>Pre-Deployment</h3>
                <ul class="checklist">
                    <li>All tests passing</li>
                    <li>Database schema deployed to Supabase</li>
                    <li>RLS policies enabled and tested</li>
                    <li>Environment variables configured</li>
                    <li>Phone auth provider configured</li>
                    <li>Google OAuth configured</li>
                    <li>Email templates customized</li>
                    <li>Firebase data backed up</li>
                    <li>Migration script tested on staging</li>
                    <li>Rollback plan documented</li>
                </ul>

                <h3>Deployment Steps</h3>
                <ol>
                    <li>Deploy database migrations to production Supabase</li>
                    <li>Update production environment variables</li>
                    <li>Run data migration script during off-peak hours</li>
                    <li>Verify authentication flows</li>
                    <li>Test critical user paths</li>
                    <li>Monitor error logs closely</li>
                    <li>Check performance metrics</li>
                </ol>

                <h3>Post-Deployment</h3>
                <ul class="checklist">
                    <li>Notify users of system upgrade</li>
                    <li>Monitor for authentication issues</li>
                    <li>Verify data integrity across stores</li>
                    <li>Test all user roles (owner, manager, cashier)</li>
                    <li>Check real-time features working</li>
                    <li>Verify offline sync functioning</li>
                    <li>Update user documentation</li>
                    <li>Collect feedback from users</li>
                </ul>

                <h3>Rollback Plan</h3>
                <div class="warning-box">
                    <p>If critical issues arise:</p>
                    <ol>
                        <li>Restore Firebase environment variables</li>
                        <li>Revert code to previous version</li>
                        <li>Verify Firebase connectivity</li>
                        <li>Notify users of temporary rollback</li>
                        <li>Debug issues in staging environment</li>
                    </ol>
                </div>
            </section>

            <section>
                <h2>Support Resources</h2>

                <h3>Documentation</h3>
                <ul>
                    <li><a href="https://supabase.com/docs" target="_blank">Supabase Official Docs</a></li>
                    <li><a href="https://supabase.com/docs/guides/auth" target="_blank">Supabase Auth Guide</a></li>
                    <li><a href="https://www.postgresql.org/docs/" target="_blank">PostgreSQL Documentation</a></li>
                </ul>

                <h3>Community Support</h3>
                <ul>
                    <li><a href="https://discord.supabase.com" target="_blank">Supabase Discord Community</a></li>
                    <li><a href="https://github.com/supabase/supabase" target="_blank">Supabase GitHub</a></li>
                </ul>

                <h3>Troubleshooting</h3>
                <table>
                    <tr>
                        <th>Issue</th>
                        <th>Solution</th>
                    </tr>
                    <tr>
                        <td>Invalid API key error</td>
                        <td>Check VITE_SUPABASE_ANON_KEY in .env file</td>
                    </tr>
                    <tr>
                        <td>RLS policy violated</td>
                        <td>User not a member of store. Check store_members table.</td>
                    </tr>
                    <tr>
                        <td>Phone auth not working</td>
                        <td>Verify Twilio credentials in Supabase dashboard</td>
                    </tr>
                    <tr>
                        <td>Profile not created</td>
                        <td>Check trigger function create_profile_for_user</td>
                    </tr>
                </table>
            </section>

            <footer style="background: #2d3748; color: white; padding: 40px; text-align: center; margin-top: 60px;">
                <p style="color: #cbd5e0; margin-bottom: 10px;">Universal POS - Supabase Backend Documentation</p>
                <p style="color: #a0aec0; font-size: 0.9rem;">Version 1.0 | January 2025 | Production Ready</p>
            </footer>
        </div>
    </div>

    <button class="print-btn" onclick="window.print()">Print PDF</button>

    <script>
        // Smooth scrolling for navigation links
        document.querySelectorAll('nav a').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                target.scrollIntoView({ behavior: 'smooth', block: 'start' });
            });
        });
    </script>
</body>
</html>
